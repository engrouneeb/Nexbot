# ====================================
# Multi-Tenant Chatbot Platform
# Environment Variables Template
# ====================================
# Copy this file to .env and fill in your values
# NEVER commit the .env file to version control!

# ====================================
# DATABASE CONFIGURATION
# ====================================
SQL_SERVER_PASSWORD=YourStrong@Password123
SQL_SERVER_CONNECTION_STRING=Server=localhost,1433;Database=ChatbotPlatform;User Id=sa;Password=YourStrong@Password123;TrustServerCertificate=True;MultipleActiveResultSets=True;

# ====================================
# REDIS CONFIGURATION
# ====================================
REDIS_PASSWORD=chatbotRedis123
REDIS_CONNECTION_STRING=localhost:6379,password=chatbotRedis123

# ====================================
# CHROMADB CONFIGURATION
# ====================================
CHROMADB_URL=http://localhost:8000

# ====================================
# SECURITY & ENCRYPTION
# ====================================
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=GENERATE_YOUR_32_CHARACTER_KEY_HERE

# Generate with: openssl rand -base64 64
JWT_SECRET=GENERATE_YOUR_64_CHARACTER_SECRET_HERE
JWT_EXPIRATION_MINUTES=60
JWT_REFRESH_EXPIRATION_DAYS=7

# ====================================
# OPENAI CONFIGURATION
# ====================================
# Platform admin bot (for internal support)
PLATFORM_OPENAI_API_KEY=sk-your-openai-api-key-here

# Default model settings (can be overridden per chatbot)
DEFAULT_EMBEDDING_MODEL=text-embedding-3-small
DEFAULT_CHAT_MODEL=gpt-4o-mini
DEFAULT_CHAT_MODEL_PREMIUM=gpt-4o

# ====================================
# STORAGE CONFIGURATION
# ====================================
STORAGE_TYPE=local  # Options: local, azure, aws

# Azure Blob Storage (if STORAGE_TYPE=azure)
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...
AZURE_STORAGE_CONTAINER=documents

# AWS S3 (if STORAGE_TYPE=aws)
AWS_S3_BUCKET=chatbot-documents
AWS_ACCESS_KEY=your-access-key
AWS_SECRET_KEY=your-secret-key
AWS_REGION=us-east-1

# Local storage path (if STORAGE_TYPE=local)
LOCAL_STORAGE_PATH=./data/uploads

# ====================================
# APPLICATION SETTINGS
# ====================================
ASPNETCORE_ENVIRONMENT=Development
ASPNETCORE_URLS=https://localhost:5001;http://localhost:5000

# ====================================
# CORS CONFIGURATION
# ====================================
CORS_ALLOWED_ORIGINS=http://localhost:4200,http://localhost:3000,http://127.0.0.1:4200

# ====================================
# RATE LIMITING
# ====================================
RATE_LIMIT_GLOBAL_PER_MINUTE=1000
RATE_LIMIT_PER_BOT_PER_MINUTE=100
RATE_LIMIT_PER_IP_PER_MINUTE=20

# ====================================
# HANGFIRE (BACKGROUND JOBS)
# ====================================
HANGFIRE_WORKER_COUNT=10
HANGFIRE_DASHBOARD_ENABLED=true
HANGFIRE_DASHBOARD_PATH=/hangfire

# ====================================
# DOCUMENT PROCESSING
# ====================================
MAX_DOCUMENT_SIZE_MB=25
ALLOWED_DOCUMENT_TYPES=pdf,docx,txt,html
CHUNK_SIZE_TOKENS=800
CHUNK_OVERLAP_TOKENS=100
MAX_CHUNKS_PER_DOCUMENT=1000

# ====================================
# RAG CONFIGURATION
# ====================================
RAG_TOP_K_RESULTS=5
RAG_MIN_SIMILARITY_SCORE=0.7
RAG_MAX_CONTEXT_TOKENS=4000

# ====================================
# CACHE CONFIGURATION
# ====================================
CACHE_CHATBOT_CONFIG_TTL_MINUTES=60
CACHE_RAG_RESPONSE_TTL_MINUTES=30
CACHE_DOCUMENT_METADATA_TTL_MINUTES=120

# ====================================
# MONITORING & LOGGING
# ====================================
ENABLE_DETAILED_ERRORS=true
LOG_LEVEL=Information  # Options: Trace, Debug, Information, Warning, Error, Critical

# Application Insights (Azure)
APPLICATIONINSIGHTS_CONNECTION_STRING=

# Serilog settings
SERILOG_MINIMUM_LEVEL=Information
SERILOG_WRITE_TO_CONSOLE=true
SERILOG_WRITE_TO_FILE=true
SERILOG_FILE_PATH=logs/chatbot-.log

# ====================================
# EMAIL CONFIGURATION (Optional)
# ====================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@chatbotplatform.com
SMTP_FROM_NAME=Chatbot Platform

# ====================================
# WEBHOOK CONFIGURATION
# ====================================
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_SECONDS=5

# ====================================
# FEATURE FLAGS
# ====================================
ENABLE_ADMIN_CHATBOT=true
ENABLE_LEAD_CAPTURE=true
ENABLE_ANALYTICS=true
ENABLE_CONVERSATION_EXPORT=true
ENABLE_WEBHOOK_INTEGRATIONS=true

# ====================================
# COSTS & LIMITS
# ====================================
# Cost estimation per 1M tokens (adjust based on OpenAI pricing)
COST_PER_1M_INPUT_TOKENS_GPT4O_MINI=0.15
COST_PER_1M_OUTPUT_TOKENS_GPT4O_MINI=0.60
COST_PER_1M_INPUT_TOKENS_GPT4O=2.50
COST_PER_1M_OUTPUT_TOKENS_GPT4O=10.00
COST_PER_1M_EMBEDDING_TOKENS=0.02

# Per-client limits
MAX_CHATBOTS_PER_CLIENT=10
MAX_DOCUMENTS_PER_CHATBOT=100
MAX_CONVERSATIONS_PER_MONTH=10000

# ====================================
# DEVELOPMENT ONLY
# ====================================
SEED_DEVELOPMENT_DATA=true
ENABLE_SWAGGER=true
ENABLE_HANGFIRE_DASHBOARD=true

# ====================================
# PRODUCTION ONLY
# ====================================
# FORCE_HTTPS=true
# HSTS_MAX_AGE_DAYS=365
# ENABLE_RESPONSE_COMPRESSION=true
# ENABLE_RESPONSE_CACHING=true
